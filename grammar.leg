%{
static void
ell_parser_add_sym(char *chars);

static void
ell_parser_add_str(char *chars);

static void
ell_parser_push();

static void
ell_parser_pop();
%}

unit       = exprs eof
exprs      = spc? (expr spc?)+
expr       = str | sym | lst

str        = "\"" < [^"]* > "\""    { ell_parser_add_str(yytext); }

sym-char   = [a-zA-Z0-9&:] | "-"
sym        = < sym-char+ >         { ell_parser_add_sym(yytext); }

lst        = OPEN exprs CLOSE
           | OPEN spc? CLOSE
OPEN       = "("                   { ell_parser_push(); }
CLOSE      = ")"                   { ell_parser_pop(); }

spc-char   = [ \t] | eol
spc        = spc-char+
eol        = [\r\n]
eof        = !.
